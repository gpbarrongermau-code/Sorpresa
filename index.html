<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Ti ‚ù§Ô∏è</title>
    <style>
        /* --- ESTILOS GENERALES --- */
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap');

        :root {
            --bg-color: #fff0f5; /* Fondo ligeramente m√°s rosado */
            --card-bg: #fffbf0;
            --text-color: #5d4037;
        }

        body {
            margin: 0; padding: 0; min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background-color: var(--bg-color);
            /* Patr√≥n de fondo m√°s suave */
            background-image: radial-gradient(#ffc1e3 10%, transparent 11%);
            background-size: 25px 25px;
            font-family: 'Nunito', sans-serif;
            overflow: hidden;
        }

        #intro-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ec407a; /* Rosa m√°s cerezo */
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100; transition: opacity 0.8s ease;
        }

        .heart-btn {
            font-size: 5rem; background: none; border: none; cursor: pointer;
            animation: beat 1.2s infinite; filter: drop-shadow(0 0 10px rgba(0,0,0,0.2));
        }

        .click-text { color: white; margin-top: 15px; font-size: 1.5rem; font-weight: bold; }

        .card {
            background-color: var(--card-bg);
            width: 900px; max-width: 95%; height: 550px;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative; display: flex; flex-direction: row;
            overflow: hidden; opacity: 0; transform: scale(0.95); transition: all 1s ease;
        }

        .content {
            flex: 1.2; padding: 50px;
            display: flex; flex-direction: column; justify-content: center;
            color: var(--text-color); z-index: 10;
        }

        h1 { font-size: 2rem; margin-bottom: 20px; color: #4e342e; font-weight: 800; }
        p { font-size: 1.15rem; line-height: 1.6; margin-bottom: 30px; min-height: 80px; }

        #timer {
            background: rgba(255, 255, 255, 0.85); padding: 20px;
            border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            font-size: 1.1rem; border: 1px solid #f8bbd0;
        }
        #time-display {
            display: block; font-weight: 800; font-size: 1.3rem; margin-top: 5px; color: #ec407a;
        }

        /* --- √ÅREA DEL √ÅRBOL --- */
        .tree-area {
            flex: 1; position: relative;
            display: flex; justify-content: center; align-items: flex-end;
            z-index: 1; overflow: hidden;
            border-bottom-right-radius: 25px;
        }

        /* ESTILOS DE TU IMAGEN LOCAL */
        .realistic-trunk-img {
            height: 90%; 
            width: auto;
            position: absolute; bottom: 0; z-index: 1;
            object-fit: contain;
            filter: drop-shadow(0px 10px 10px rgba(0,0,0,0.3));
        }

        /* Contenedor de hojas */
        .leaves-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2; pointer-events: none;
        }

        /* --- NUEVO ESTILO: P√âTALO DE CEREZO (Sakura) --- */
        .sakura-petal {
            position: absolute;
            width: 14px; height: 20px; /* Forma m√°s alargada */
            /* Esta l√≠nea crea la forma de p√©talo usando bordes redondeados opuestos */
            border-radius: 100% 0 100% 0;
            opacity: 0.9;
            /* Sombra suave rosada */
            filter: drop-shadow(1px 1px 1px rgba(165, 42, 42, 0.2));
        }
        /* Ya no necesitamos los ::before y ::after del coraz√≥n */

        .static-leaf { z-index: 2; transform: rotate(var(--r)) scale(var(--s)); }
        .flying-leaf { z-index: 3; animation: fly-away 7s linear forwards; }

        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes fly-away {
            /* La animaci√≥n de vuelo ahora incluye un peque√±o giro (tumble) */
            0% { transform: translate(0, 0) rotate(var(--start-r, 45deg)) scale(1); opacity: 1; }
            100% { transform: translate(-550px, 150px) rotate(var(--end-r, -90deg)) scale(0); opacity: 0; }
        }

        @media (max-width: 850px) {
            .card { flex-direction: column-reverse; height: 90vh; width: 90%; }
            .content { padding: 30px; text-align: center; flex: none; }
            .tree-area { height: 400px; flex: 1; width: 100%; }
            .realistic-trunk-img { height: 85%; }
        }
    </style>
</head>
<body>

    <div id="intro-screen">
        <button class="heart-btn" onclick="startExperience()">üå∏</button> <div class="click-text">Haz click para comenzar</div>
    </div>

    <div class="card" id="main-card">
        <div class="content">
            <h1>Para el amor de mi vida:</h1>
            <p id="typewriter-text"></p>
            <div id="timer">
                Mi amor por ti comenz√≥ hace...
                <span id="time-display">Calculando...</span>
            </div>
        </div>

        <div class="tree-area">
            <img src="Cerezo.png" alt="Tronco realista" class="realistic-trunk-img">
            
            <div class="leaves-container" id="leaves-container"></div>
        </div>
    </div>

    <script>
        // --- CONFIGURACI√ìN ---
        const fechaInicio = new Date('2024-02-14T00:00:00'); 
        const mensaje = "Si pudiera elegir un lugar seguro, ser√≠a a tu lado. Cuanto m√°s tiempo estoy contigo, m√°s te amo. ¬°Feliz San Valent√≠n!";
        
        // NUEVA PALETA DE COLORES: Rosas suaves de cerezo (Sakura)
        const sakuraColors = [
            '#ffcdd2', // Rosa muy claro
            '#f8bbd0', // Rosa pastel
            '#f48fb1', // Rosa medio
            '#ff80ab', // Rosa acento claro
            '#ff4081', // Rosa acento medio
            '#fce4ec', // Casi blanco rosado
            '#ffabe2'  // Rosa chicle suave
        ];

        function startExperience() {
            document.getElementById('intro-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('intro-screen').style.display = 'none';
                const card = document.getElementById('main-card');
                card.style.opacity = '1'; card.style.transform = 'scale(1)';

                fillTreeWithLeaves();
                startFlyingHeartsAnimation();
                typeWriter();
                setInterval(updateTimer, 1000);
            }, 1000);
        }

        // Crear copa densa
        function fillTreeWithLeaves() {
            const container = document.getElementById('leaves-container');
            const totalStaticLeaves = 350; // Aumentado para m√°s densidad

            for (let i = 0; i < totalStaticLeaves; i++) {
                createPetal(container, 'static-leaf', true);
            }
        }

        function startFlyingHeartsAnimation() {
            const container = document.getElementById('leaves-container');
            setInterval(() => {
                createPetal(container, 'flying-leaf', false);
            }, 400); 
        }

        // Funci√≥n renombrada a createPetal
        function createPetal(container, className, isStatic) {
            const petal = document.createElement('div');
            // Usamos la nueva clase .sakura-petal
            petal.classList.add('sakura-petal', className);
            
            // Usamos la nueva paleta de colores
            const color = sakuraColors[Math.floor(Math.random() * sakuraColors.length)];
            petal.style.backgroundColor = color;

            let leftPos, topPos;

            if (isStatic) {
                // Copa redonda (Igual que antes, funciona bien para cerezos)
                const angle = Math.random() * Math.PI * 2; 
                const radius = Math.sqrt(Math.random()); 
                
                // AJUSTA ESTOS VALORES SI TU TRONCO LO NECESITA
                const centerX = 50;
                const centerY = 35;
                const spreadX = 30; // Un poco m√°s ancho
                const spreadY = 26;

                leftPos = centerX + (Math.cos(angle) * spreadX * radius);
                topPos = centerY + (Math.sin(angle) * spreadY * radius);

                const scale = 0.3 + Math.random() * 0.6;
                const rotation = Math.random() * 360; // Rotaci√≥n completa aleatoria para p√©talos
                
                petal.style.setProperty('--s', scale);
                petal.style.setProperty('--r', `${rotation}deg`);
            } else {
                // Viento
                leftPos = 55 + (Math.random() * 25); 
                topPos = 15 + (Math.random() * 35);  
                
                // Variables para que el giro al volar sea aleatorio
                const startRotation = Math.random() * 360;
                const endRotation = startRotation + (Math.random() * 720 - 360); // Giro aleatorio mientras cae
                petal.style.setProperty('--start-r', `${startRotation}deg`);
                petal.style.setProperty('--end-r', `${endRotation}deg`);
                
                setTimeout(() => { petal.remove(); }, 8000);
            }

            petal.style.left = `${leftPos}%`;
            petal.style.top = `${topPos}%`;

            // ¬°El hack complejo de colores ya no es necesario!
            // Simplemente a√±adimos el div al contenedor.
            container.appendChild(petal);
        }

        let charIndex = 0;
        function typeWriter() {
            if (charIndex < mensaje.length) {
                document.getElementById("typewriter-text").innerHTML += mensaje.charAt(charIndex);
                charIndex++; setTimeout(typeWriter, 50);
            }
        }

        function updateTimer() {
            const ahora = new Date(); const diferencia = ahora - fechaInicio;
            const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
            const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
            const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);
            document.getElementById('time-display').innerHTML = `${dias} d√≠as ${horas} horas ${minutos} minutos ${segundos} segundos`;
        }
    </script>
</body>
</html>